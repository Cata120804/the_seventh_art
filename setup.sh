#!/usr/bin/env bash
set -e  # Detiene la ejecuciรณn si algo falla

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐ Iniciando setup automรกtico de la aplicaciรณn Spring Boot + MySQL"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
sleep 1

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# โ 1๏ธโฃ  Cargar variables de entorno desde .env          โ
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
#if [ -f .env ]; then
#  echo "๐ง Cargando variables desde .env..."
#  set -a
#  source .env
#  set +a
#else
#  echo "โ No se encontrรณ el archivo .env. Crea uno antes de continuar."
#  exit 1
#fi
#sleep 1

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# โ 2๏ธโฃ  Levantar stack con Docker Compose               โ
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo "๐ณ Levantando contenedores con Docker Compose..."
if command -v docker compose >/dev/null 2>&1; then
  docker compose up -d --build --wait
else
  docker-compose up -d --build
fi
echo "โ Contenedores en ejecuciรณn."
sleep 1

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# โ 4๏ธโฃ  Informaciรณn final                               โ
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo "๐ฏ Todo listo. La aplicaciรณn estรก corriendo en:"
echo "๐ http://localhost:8080"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
